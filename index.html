<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cara Brown — Job Application Toolkit</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=DM+Mono:wght@300;400&family=Instrument+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --ink: #0e0e0c;
    --paper: #f5f2eb;
    --cream: #ede9df;
    --gold: #b8975a;
    --gold-light: #d4b87a;
    --rust: #a0522d;
    --muted: #7a7468;
    --border: #d6d0c4;
    --success: #3a6b45;
    --warn: #8b6914;
    --panel: #faf8f3;
    --shadow: rgba(14,14,12,0.08);
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  html { font-size: 16px; }
  body {
    font-family: 'Instrument Sans', sans-serif;
    background: var(--paper);
    color: var(--ink);
    min-height: 100vh;
  }

  /* ─── HEADER ─── */
  header {
    background: var(--ink);
    padding: 2rem 3rem;
    display: flex;
    align-items: baseline;
    gap: 2rem;
    border-bottom: 2px solid var(--gold);
  }
  header h1 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 2.2rem;
    font-weight: 300;
    color: var(--paper);
    letter-spacing: 0.02em;
  }
  header h1 em {
    font-style: italic;
    color: var(--gold-light);
  }
  header .sub {
    font-family: 'DM Mono', monospace;
    font-size: 0.65rem;
    color: var(--muted);
    letter-spacing: 0.15em;
    text-transform: uppercase;
    margin-top: 0.2rem;
  }

  /* ─── LAYOUT ─── */
  .app {
    display: grid;
    grid-template-columns: 240px 1fr;
    min-height: calc(100vh - 90px);
  }

  /* ─── SIDEBAR NAV ─── */
  nav {
    background: var(--ink);
    padding: 2.5rem 0;
    position: sticky;
    top: 0;
    height: calc(100vh - 90px);
    overflow-y: auto;
    border-right: 1px solid #1e1e1c;
  }
  nav ul { list-style: none; }
  nav ul li { border-bottom: 1px solid #1a1a18; }
  nav ul li a {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    padding: 0.9rem 1.5rem;
    color: #a09890;
    text-decoration: none;
    font-size: 0.78rem;
    letter-spacing: 0.05em;
    font-family: 'DM Mono', monospace;
    transition: all 0.2s;
    cursor: pointer;
  }
  nav ul li a:hover { color: var(--gold-light); background: #141412; }
  nav ul li a.active { color: var(--gold); background: #141412; border-left: 2px solid var(--gold); }
  nav ul li a .num {
    font-size: 0.6rem;
    color: #3a3a38;
    width: 16px;
    text-align: right;
  }
  nav ul li a.active .num { color: var(--gold); opacity: 0.5; }
  .nav-section {
    padding: 1.5rem 1.5rem 0.5rem;
    font-family: 'DM Mono', monospace;
    font-size: 0.55rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: #3a3a38;
  }

  /* ─── MAIN CONTENT ─── */
  main {
    overflow-y: auto;
    height: calc(100vh - 90px);
  }
  .panel {
    display: none;
    padding: 3rem;
    max-width: 900px;
    animation: fadeIn 0.3s ease;
  }
  .panel.active { display: block; }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }

  .panel-title {
    font-family: 'Cormorant Garamond', serif;
    font-size: 2.8rem;
    font-weight: 300;
    margin-bottom: 0.3rem;
    line-height: 1.1;
  }
  .panel-title em { font-style: italic; color: var(--gold); }
  .panel-desc {
    color: var(--muted);
    font-size: 0.85rem;
    margin-bottom: 2.5rem;
    line-height: 1.6;
  }
  .divider {
    width: 48px;
    height: 1px;
    background: var(--gold);
    margin: 1rem 0 2rem;
  }

  /* ─── FORM ELEMENTS ─── */
  label {
    display: block;
    font-family: 'DM Mono', monospace;
    font-size: 0.65rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 0.5rem;
  }
  textarea, input[type="url"], input[type="text"] {
    width: 100%;
    background: var(--panel);
    border: 1px solid var(--border);
    color: var(--ink);
    font-family: 'Instrument Sans', sans-serif;
    font-size: 0.88rem;
    line-height: 1.6;
    padding: 1rem 1.2rem;
    border-radius: 4px;
    resize: vertical;
    transition: border-color 0.2s;
    margin-bottom: 1.5rem;
  }
  textarea:focus, input:focus {
    outline: none;
    border-color: var(--gold);
  }
  textarea { min-height: 180px; }
  input[type="url"], input[type="text"] { min-height: unset; }

  .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; }

  /* ─── BUTTONS ─── */
  .btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 2rem;
    background: var(--ink);
    color: var(--gold);
    border: 1px solid var(--gold);
    font-family: 'DM Mono', monospace;
    font-size: 0.7rem;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    cursor: pointer;
    border-radius: 3px;
    transition: all 0.2s;
  }
  .btn:hover { background: var(--gold); color: var(--ink); }
  .btn:disabled { opacity: 0.4; cursor: not-allowed; }
  .btn-ghost {
    background: transparent;
    border-color: var(--border);
    color: var(--muted);
  }
  .btn-ghost:hover { border-color: var(--gold); color: var(--gold); background: transparent; }
  .btn-row { display: flex; gap: 1rem; margin-top: 0.5rem; }

  /* ─── RESUME PILLS ─── */
  .resume-pills {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
  }
  .pill {
    padding: 0.4rem 1rem;
    border: 1px solid var(--border);
    border-radius: 20px;
    font-family: 'DM Mono', monospace;
    font-size: 0.65rem;
    color: var(--muted);
    cursor: pointer;
    transition: all 0.2s;
    letter-spacing: 0.03em;
  }
  .pill.selected {
    background: var(--ink);
    color: var(--gold);
    border-color: var(--gold);
  }
  .pill:hover:not(.selected) { border-color: var(--ink); color: var(--ink); }

  /* ─── RESULTS ─── */
  .result-box {
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 1.5rem;
    margin-top: 1.5rem;
    display: none;
  }
  .result-box.visible { display: block; }
  .result-box h3 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.2rem;
    font-weight: 400;
    margin-bottom: 1rem;
  }

  .score-cards {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 1rem;
    margin-bottom: 1.5rem;
  }
  .score-card {
    background: white;
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 1rem;
    text-align: center;
    transition: transform 0.2s;
  }
  .score-card:hover { transform: translateY(-2px); }
  .score-card .score-num {
    font-family: 'Cormorant Garamond', serif;
    font-size: 2.4rem;
    font-weight: 600;
    line-height: 1;
    margin-bottom: 0.3rem;
  }
  .score-card .score-label {
    font-family: 'DM Mono', monospace;
    font-size: 0.58rem;
    color: var(--muted);
    letter-spacing: 0.08em;
    text-transform: uppercase;
    line-height: 1.4;
  }
  .score-high { color: var(--success); }
  .score-mid { color: var(--warn); }
  .score-low { color: var(--rust); }

  .result-prose {
    font-size: 0.88rem;
    line-height: 1.75;
    color: var(--ink);
    white-space: pre-wrap;
  }
  .result-prose strong { font-weight: 600; }

  /* ─── LOADING ─── */
  .loading {
    display: none;
    align-items: center;
    gap: 0.8rem;
    color: var(--muted);
    font-family: 'DM Mono', monospace;
    font-size: 0.7rem;
    letter-spacing: 0.1em;
    margin-top: 1rem;
  }
  .loading.visible { display: flex; }
  .spinner {
    width: 16px; height: 16px;
    border: 2px solid var(--border);
    border-top-color: var(--gold);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
  }
  @keyframes spin { to { transform: rotate(360deg); } }

  .copy-btn {
    float: right;
    padding: 0.3rem 0.8rem;
    font-size: 0.6rem;
    background: transparent;
    border: 1px solid var(--border);
    color: var(--muted);
    font-family: 'DM Mono', monospace;
    cursor: pointer;
    border-radius: 3px;
    letter-spacing: 0.08em;
    transition: all 0.2s;
    margin-bottom: 0.5rem;
  }
  .copy-btn:hover { border-color: var(--gold); color: var(--gold); }

  /* ─── STEP INDICATOR ─── */
  .step-hint {
    background: var(--cream);
    border-left: 3px solid var(--gold);
    padding: 0.8rem 1.2rem;
    font-size: 0.8rem;
    color: var(--muted);
    border-radius: 0 4px 4px 0;
    margin-bottom: 2rem;
    line-height: 1.5;
  }

  /* ─── STREAMED TEXT ─── */
  .stream-output {
    font-size: 0.88rem;
    line-height: 1.75;
    color: var(--ink);
    white-space: pre-wrap;
    min-height: 40px;
  }

  /* ─── TABS ─── */
  .tab-row {
    display: flex;
    gap: 0;
    border-bottom: 1px solid var(--border);
    margin-bottom: 1.5rem;
  }
  .tab {
    padding: 0.6rem 1.2rem;
    font-family: 'DM Mono', monospace;
    font-size: 0.65rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--muted);
    cursor: pointer;
    border-bottom: 2px solid transparent;
    margin-bottom: -1px;
    transition: all 0.2s;
  }
  .tab.active { color: var(--gold); border-bottom-color: var(--gold); }
  .tab:hover:not(.active) { color: var(--ink); }

  /* ─── INFO CHIPS ─── */
  .chip {
    display: inline-block;
    padding: 0.25rem 0.6rem;
    background: var(--cream);
    border: 1px solid var(--border);
    border-radius: 3px;
    font-family: 'DM Mono', monospace;
    font-size: 0.6rem;
    color: var(--muted);
    letter-spacing: 0.05em;
    margin-right: 0.4rem;
    margin-bottom: 0.4rem;
  }

  @media (max-width: 768px) {
    .app { grid-template-columns: 1fr; }
    nav { display: none; }
    .panel { padding: 1.5rem; }
    .form-row { grid-template-columns: 1fr; }
  }

  .error-msg {
    color: var(--rust);
    font-size: 0.8rem;
    font-family: 'DM Mono', monospace;
    margin-top: 0.5rem;
    display: none;
  }
  .error-msg.visible { display: block; }

  /* ─── SETTINGS MODAL ─── */
  .modal-overlay {
    display: none;
    position: fixed; inset: 0;
    background: rgba(14,14,12,0.7);
    z-index: 1000;
    align-items: center;
    justify-content: center;
  }
  .modal-overlay.open { display: flex; }
  .modal-box {
    background: var(--paper);
    border: 1px solid var(--gold);
    border-radius: 8px;
    padding: 2.5rem;
    width: 480px;
    max-width: 92vw;
  }
  .modal-box h2 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.8rem;
    font-weight: 300;
    margin-bottom: 0.3rem;
  }
  .modal-box h2 em { font-style: italic; color: var(--gold); }
  .modal-box p { font-size: 0.82rem; color: var(--muted); margin-bottom: 1.5rem; line-height: 1.6; }
  .modal-box a { color: var(--gold); }
  .modal-close { float: right; background: none; border: none; font-size: 1.4rem; cursor: pointer; color: var(--muted); margin-top: -0.5rem; }
  .key-status {
    font-family: 'DM Mono', monospace;
    font-size: 0.65rem;
    letter-spacing: 0.1em;
    padding: 0.4rem 0.8rem;
    border-radius: 3px;
    display: inline-block;
    margin-top: 0.5rem;
  }
  .key-status.set { background: #e6f2ea; color: var(--success); }
  .key-status.unset { background: #fdf0e6; color: var(--rust); }

  /* ─── SETTINGS BTN IN HEADER ─── */
  .settings-btn {
    margin-left: auto;
    background: transparent;
    border: 1px solid #3a3a38;
    color: #a09890;
    font-family: 'DM Mono', monospace;
    font-size: 0.65rem;
    letter-spacing: 0.1em;
    padding: 0.5rem 1rem;
    cursor: pointer;
    border-radius: 3px;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 0.4rem;
    white-space: nowrap;
  }
  .settings-btn:hover { border-color: var(--gold); color: var(--gold); }
  .settings-btn.key-set { border-color: var(--success); color: var(--success); }

  /* ─── JOB TRACKER ─── */
  .tracker-stats {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1rem;
    margin-bottom: 2.5rem;
  }
  .stat-card {
    background: var(--ink);
    color: var(--paper);
    border-radius: 6px;
    padding: 1.2rem;
    text-align: center;
  }
  .stat-num {
    font-family: 'Cormorant Garamond', serif;
    font-size: 2.8rem;
    font-weight: 600;
    color: var(--gold);
    line-height: 1;
    margin-bottom: 0.3rem;
  }
  .stat-label {
    font-family: 'DM Mono', monospace;
    font-size: 0.58rem;
    color: #a09890;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    line-height: 1.4;
  }
  .stat-sub {
    font-family: 'DM Mono', monospace;
    font-size: 0.55rem;
    color: #605a52;
    margin-top: 0.3rem;
  }
  .goal-bar-wrap {
    grid-column: 1 / -1;
    background: var(--cream);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 1rem 1.2rem;
  }
  .goal-bar-label {
    font-family: 'DM Mono', monospace;
    font-size: 0.62rem;
    color: var(--muted);
    letter-spacing: 0.1em;
    text-transform: uppercase;
    margin-bottom: 0.5rem;
    display: flex;
    justify-content: space-between;
  }
  .goal-bar-track {
    height: 8px;
    background: var(--border);
    border-radius: 4px;
    overflow: hidden;
  }
  .goal-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--gold), var(--gold-light));
    border-radius: 4px;
    transition: width 0.5s ease;
  }

  .add-job-form {
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 1.5rem;
    margin-bottom: 2rem;
  }
  .add-job-form h3 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.1rem;
    font-weight: 400;
    margin-bottom: 1rem;
  }
  .job-form-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
  }
  .job-form-grid .full { grid-column: 1 / -1; }

  .jobs-table-wrap { overflow-x: auto; }
  .jobs-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.82rem;
  }
  .jobs-table th {
    font-family: 'DM Mono', monospace;
    font-size: 0.58rem;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--muted);
    padding: 0.6rem 0.8rem;
    border-bottom: 2px solid var(--border);
    text-align: left;
    white-space: nowrap;
  }
  .jobs-table td {
    padding: 0.8rem 0.8rem;
    border-bottom: 1px solid var(--border);
    vertical-align: middle;
  }
  .jobs-table tr:hover td { background: var(--cream); }
  .jobs-table tr.hired-row td { background: #e8f5ec; }

  .stage-checks {
    display: flex;
    gap: 0.5rem;
    align-items: center;
  }
  .stage-check-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.2rem;
    font-family: 'DM Mono', monospace;
    font-size: 0.5rem;
    color: var(--muted);
    letter-spacing: 0.05em;
    text-transform: uppercase;
  }
  .stage-check-item input[type="checkbox"] {
    width: 16px;
    height: 16px;
    accent-color: var(--gold);
    cursor: pointer;
    margin: 0;
  }
  .delete-job-btn {
    background: none;
    border: none;
    color: var(--border);
    cursor: pointer;
    font-size: 1rem;
    line-height: 1;
    padding: 0.2rem;
    transition: color 0.2s;
  }
  .delete-job-btn:hover { color: var(--rust); }
  .applied-date {
    font-family: 'DM Mono', monospace;
    font-size: 0.62rem;
    color: var(--muted);
    white-space: nowrap;
  }
  .job-link { color: var(--gold); text-decoration: none; font-size: 0.75rem; }
  .job-link:hover { text-decoration: underline; }
  .empty-state {
    text-align: center;
    padding: 3rem;
    color: var(--muted);
    font-family: 'DM Mono', monospace;
    font-size: 0.72rem;
    letter-spacing: 0.08em;
  }

  @media (max-width: 768px) {
    .tracker-stats { grid-template-columns: 1fr 1fr; }
    .job-form-grid { grid-template-columns: 1fr; }
    .job-form-grid .full { grid-column: 1; }
  }

</style>
</head>
<body>

<header>
  <div>
    <h1>Cara Brown — <em>Job Application Toolkit</em></h1>
    <div class="sub">ATS Analysis · Cover Letters · Interview Prep · Company Research · Salary &amp; Recruiter Intel</div>
  </div>
  <button class="settings-btn" id="settings-open-btn">⚙ API Key</button>
</header>

<!-- SETTINGS MODAL -->
<div class="modal-overlay" id="settings-modal">
  <div class="modal-box">
    <button class="modal-close" id="settings-close-btn">✕</button>
    <h2>API <em>Settings</em></h2>
    <p>This toolkit calls the Anthropic API directly. Paste your API key below — it's saved only in your browser's local storage and never sent anywhere except Anthropic.<br><br>
    Get your key at <a href="https://console.anthropic.com/api-keys" target="_blank">console.anthropic.com/api-keys</a>. Usage is billed to your Anthropic account.</p>
    <label>Anthropic API Key</label>
    <input type="password" id="api-key-input" placeholder="sk-ant-api03-..." style="margin-bottom:1rem;">
    <div class="btn-row">
      <button class="btn" id="save-key-btn">Save Key</button>
      <button class="btn btn-ghost" id="clear-key-btn">Clear Key</button>
    </div>
    <div id="key-status-msg" class="key-status unset" style="margin-top:1rem;">No API key saved</div>
  </div>
</div>

<div class="app">
  <!-- SIDEBAR NAV -->
  <nav>
    <div class="nav-section">Setup</div>
    <ul>
      <li><a href="#" class="active" data-panel="job-input"><span class="num">01</span> Job Description</a></li>
    </ul>
    <div class="nav-section">Analysis</div>
    <ul>
      <li><a href="#" data-panel="ats-check"><span class="num">02</span> ATS Check</a></li>
      <li><a href="#" data-panel="resume-update"><span class="num">03</span> Revised Resume</a></li>
    </ul>
    <div class="nav-section">Application</div>
    <ul>
      <li><a href="#" data-panel="cover-letter"><span class="num">04</span> Cover Letter</a></li>
      <li><a href="#" data-panel="why-this-job"><span class="num">05</span> Why This Job</a></li>
      <li><a href="#" data-panel="custom-qa"><span class="num">06</span> Custom Q&amp;A</a></li>
    </ul>
    <div class="nav-section">Tracker</div>
    <ul>
      <li><a href="#" data-panel="job-tracker"><span class="num">07</span> Job Tracker</a></li>
    </ul>
    <div class="nav-section">Intelligence</div>
    <ul>
      <li><a href="#" data-panel="company-research"><span class="num">08</span> Company Research</a></li>
      <li><a href="#" data-panel="interview-prep"><span class="num">09</span> Interview Prep</a></li>
      <li><a href="#" data-panel="linkedin-outreach"><span class="num">10</span> LinkedIn Outreach</a></li>
      <li><a href="#" data-panel="salary-intel"><span class="num">11</span> Salary &amp; Recruiter Intel</a></li>
    </ul>
  </nav>

  <!-- MAIN -->
  <main>

    <!-- ── PANEL 1: JOB DESCRIPTION ── -->
    <div class="panel active" id="panel-job-input">
      <div class="panel-title">Job <em>Description</em></div>
      <div class="divider"></div>
      <div class="panel-desc">Paste the job description and add the posting URL. This becomes the foundation for every other tool on this microsite.</div>

      <label>Job Description *</label>
      <textarea id="jd-text" placeholder="Paste the full job description here…" rows="14"></textarea>

      <label>Job Posting URL</label>
      <input type="url" id="jd-url" placeholder="https://company.com/careers/job-title">

      <label>Company & Role (optional, helps with cover letter tone)</label>
      <input type="text" id="job-role-name" placeholder="e.g., Principal Service Designer at Accenture Federal Services">

      <div class="btn-row">
        <button class="btn" id="save-jd-btn">Save & Continue →</button>
      </div>
      <div id="jd-saved-msg" style="display:none; margin-top:1rem; color: var(--success); font-family: 'DM Mono', monospace; font-size: 0.7rem; letter-spacing: 0.1em;">✓ JOB DESCRIPTION SAVED</div>
    </div>

    <!-- ── PANEL 2: ATS CHECK ── -->
    <div class="panel" id="panel-ats-check">
      <div class="panel-title">ATS <em>Analysis</em></div>
      <div class="divider"></div>
      <div class="panel-desc">Run an ATS keyword and relevance analysis against all five of your resumes. Each will be scored 0–100%, with detailed suggestions to push the best match above 95%.</div>

      <div class="step-hint">Make sure you've saved a job description in step 01 before running this analysis.</div>

      <label>Resumes to analyze</label>
      <div class="resume-pills">
        <div class="pill selected" data-resume="principal_ds">Principal Design Strategist</div>
        <div class="pill selected" data-resume="principal_ds_brief">Design Strategist (Brief)</div>
        <div class="pill selected" data-resume="service_designer">Principal Service Designer</div>
        <div class="pill selected" data-resume="product_designer">Lead Product Designer</div>
        <div class="pill selected" data-resume="chief_of_staff">Chief of Staff</div>
      </div>

      <div class="btn-row">
        <button class="btn" id="run-ats-btn">Run ATS Analysis</button>
      </div>

      <div class="loading" id="ats-loading"><div class="spinner"></div>Analyzing all resumes…</div>
      <div class="error-msg" id="ats-error"></div>

      <div class="result-box" id="ats-result">
        <h3>ATS Score Summary</h3>
        <div class="score-cards" id="score-cards-container"></div>
        <div id="ats-detail-output" class="stream-output"></div>
      </div>
    </div>

    <!-- ── PANEL 3: REVISED RESUME CHECK ── -->
    <div class="panel" id="panel-resume-update">
      <div class="panel-title">Revised Resume <em>Check</em></div>
      <div class="divider"></div>
      <div class="panel-desc">After applying the suggested edits, paste your updated resume here for a fresh ATS score.</div>

      <label>Updated Resume Text *</label>
      <textarea id="updated-resume-text" placeholder="Paste your updated resume text here…" rows="14"></textarea>

      <div class="btn-row">
        <button class="btn" id="recheck-btn">Re-run ATS Check</button>
      </div>

      <div class="loading" id="recheck-loading"><div class="spinner"></div>Analyzing revised resume…</div>
      <div class="error-msg" id="recheck-error"></div>

      <div class="result-box" id="recheck-result">
        <button class="copy-btn" onclick="copyResult('recheck-output')">Copy</button>
        <div class="stream-output" id="recheck-output"></div>
      </div>
    </div>

    <!-- ── PANEL 4: COVER LETTER ── -->
    <div class="panel" id="panel-cover-letter">
      <div class="panel-title">Cover <em>Letter</em></div>
      <div class="divider"></div>
      <div class="panel-desc">Generates a personalized cover letter using your resumes and website (caraabrown.com). The letter will reference specific accomplishments and tie them to the job requirements.</div>

      <label>Resume to reference</label>
      <div class="resume-pills" id="cl-resume-pills">
        <div class="pill selected" data-resume="principal_ds">Principal Design Strategist</div>
        <div class="pill" data-resume="principal_ds_brief">Design Strategist (Brief)</div>
        <div class="pill" data-resume="service_designer">Principal Service Designer</div>
        <div class="pill" data-resume="product_designer">Lead Product Designer</div>
        <div class="pill" data-resume="chief_of_staff">Chief of Staff</div>
      </div>

      <label>Tone preference</label>
      <div class="tab-row" id="cl-tone">
        <div class="tab active" data-tone="strategic">Strategic & Precise</div>
        <div class="tab" data-tone="warm">Warm & Personal</div>
        <div class="tab" data-tone="executive">Executive Confidence</div>
      </div>

      <div class="btn-row">
        <button class="btn" id="gen-cl-btn">Generate Cover Letter</button>
      </div>

      <div class="loading" id="cl-loading"><div class="spinner"></div>Crafting your cover letter…</div>
      <div class="error-msg" id="cl-error"></div>

      <div class="result-box" id="cl-result">
        <button class="copy-btn" onclick="copyResult('cl-output')">Copy</button>
        <div class="stream-output" id="cl-output"></div>
      </div>
    </div>

    <!-- ── PANEL 5: WHY THIS JOB ── -->
    <div class="panel" id="panel-why-this-job">
      <div class="panel-title">Why <em>This Job</em></div>
      <div class="divider"></div>
      <div class="panel-desc">Generates a compelling, authentic answer to "Why do you want this role?" and "Why would you be a great fit?" — grounded in your actual experience and the specific job requirements.</div>

      <label>Additional context (optional)</label>
      <textarea id="why-context" placeholder="Add any personal notes, things that specifically excited you about this role, the company, or the team…" rows="5"></textarea>

      <div class="btn-row">
        <button class="btn" id="gen-why-btn">Generate Answer</button>
      </div>

      <div class="loading" id="why-loading"><div class="spinner"></div>Writing your response…</div>
      <div class="error-msg" id="why-error"></div>

      <div class="result-box" id="why-result">
        <button class="copy-btn" onclick="copyResult('why-output')">Copy</button>
        <div class="stream-output" id="why-output"></div>
      </div>
    </div>

    <!-- ── PANEL 6: CUSTOM Q&A ── -->
    <div class="panel" id="panel-custom-qa">
      <div class="panel-title">Application <em>Q&amp;A</em></div>
      <div class="divider"></div>
      <div class="panel-desc">Paste any application question here — "Describe a time you led change," "What's your leadership philosophy," etc. — and get a tailored answer drawn from your experience.</div>

      <label>Application Question *</label>
      <textarea id="custom-question" placeholder="e.g., Describe a time you had to influence without authority to drive enterprise-wide change…" rows="5"></textarea>

      <label>Word limit (optional)</label>
      <input type="text" id="word-limit" placeholder="e.g., 250 words or ~3 paragraphs">

      <div class="btn-row">
        <button class="btn" id="gen-qa-btn">Generate Answer</button>
      </div>

      <div class="loading" id="qa-loading"><div class="spinner"></div>Writing your response…</div>
      <div class="error-msg" id="qa-error"></div>

      <div class="result-box" id="qa-result">
        <button class="copy-btn" onclick="copyResult('qa-output')">Copy</button>
        <div class="stream-output" id="qa-output"></div>
      </div>
    </div>

    <!-- ── PANEL 7: JOB TRACKER ── -->
    <div class="panel" id="panel-job-tracker">
      <div class="panel-title">Job <em>Tracker</em></div>
      <div class="divider"></div>
      <div class="panel-desc">Track every application in one place. Log jobs, mark your progress through each stage, and watch your weekly momentum build. Goal: 5 applications per day.</div>

      <!-- STATS ROW -->
      <div class="tracker-stats">
        <div class="stat-card">
          <div class="stat-num" id="stat-total">0</div>
          <div class="stat-label">Total Applied</div>
        </div>
        <div class="stat-card">
          <div class="stat-num" id="stat-week">0</div>
          <div class="stat-label">Applied This Week</div>
          <div class="stat-sub" id="stat-week-goal">Goal: 35 / week</div>
        </div>
        <div class="stat-card">
          <div class="stat-num" id="stat-active">0</div>
          <div class="stat-label">In Progress</div>
          <div class="stat-sub">(Screening or Interview)</div>
        </div>
        <div class="stat-card">
          <div class="stat-num" id="stat-weeks">—</div>
          <div class="stat-label">Weeks Searching</div>
          <div class="stat-sub" id="stat-since">Since first application</div>
        </div>
        <div class="goal-bar-wrap">
          <div class="goal-bar-label">
            <span>Weekly Progress (Goal: 35 applications)</span>
            <span id="goal-bar-pct">0%</span>
          </div>
          <div class="goal-bar-track">
            <div class="goal-bar-fill" id="goal-bar-fill" style="width:0%"></div>
          </div>
        </div>
      </div>

      <!-- ADD JOB FORM -->
      <div class="add-job-form">
        <h3>Log a New Application</h3>
        <div class="job-form-grid">
          <div>
            <label>Company *</label>
            <input type="text" id="new-company" placeholder="e.g., Accenture Federal Services">
          </div>
          <div>
            <label>Role Title *</label>
            <input type="text" id="new-role" placeholder="e.g., Principal Service Designer">
          </div>
          <div class="full">
            <label>Job Posting URL (optional)</label>
            <input type="url" id="new-url" placeholder="https://...">
          </div>
          <div>
            <label>Recruiter / Source (optional)</label>
            <input type="text" id="new-source" placeholder="e.g., LinkedIn, Indeed, Accenture Careers, Jane Smith @ SearchFirm">
          </div>
          <div>
            <label>Notes (optional)</label>
            <input type="text" id="new-notes" placeholder="e.g., Dream role, referred by Jordan">
          </div>
        </div>
        <div class="btn-row" style="margin-top:1rem;">
          <button class="btn" id="add-job-btn">+ Log Application</button>
        </div>
      </div>

      <!-- JOBS TABLE -->
      <div id="jobs-empty" class="empty-state">No applications logged yet. Add your first one above.</div>
      <div class="jobs-table-wrap" id="jobs-table-wrap" style="display:none;">
        <table class="jobs-table">
          <thead>
            <tr>
              <th>Company</th>
              <th>Role</th>
              <th>Source</th>
              <th>Date Applied</th>
              <th style="text-align:center;">Applied</th>
              <th style="text-align:center;">Screening</th>
              <th style="text-align:center;">Interview</th>
              <th style="text-align:center;">Hired</th>
              <th>Notes</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="jobs-tbody"></tbody>
        </table>
      </div>
    </div>

    <!-- ── PANEL 7: COMPANY RESEARCH BRIEF ── -->
    <div class="panel" id="panel-company-research">
      <div class="panel-title">Company <em>Research Brief</em></div>
      <div class="divider"></div>
      <div class="panel-desc">Generates a structured intelligence brief on the target company — mission, values, culture signals, recent news, strategic priorities, and exactly how your background maps to their needs. Designed for the depth your MIT coursework emphasized.</div>

      <div class="step-hint">Works best when you've saved a job description. Add the company website or LinkedIn URL for richer results.</div>

      <div class="form-row">
        <div>
          <label>Company Name *</label>
          <input type="text" id="company-name" placeholder="e.g., Accenture Federal Services">
        </div>
        <div>
          <label>Company Website or LinkedIn URL</label>
          <input type="url" id="company-url" placeholder="https://company.com">
        </div>
      </div>

      <label>What do you already know about them? (optional)</label>
      <textarea id="company-notes" placeholder="e.g., I know they're expanding their digital transformation practice, saw they recently won a federal contract, the hiring manager was at USDS…" rows="4"></textarea>

      <label>Research depth</label>
      <div class="tab-row" id="research-depth-tabs">
        <div class="tab active" data-depth="standard">Standard Brief</div>
        <div class="tab" data-depth="deep">Deep Dive</div>
        <div class="tab" data-depth="interview">Pre-Interview</div>
      </div>

      <div class="btn-row">
        <button class="btn" id="gen-research-btn">Generate Research Brief</button>
      </div>

      <div class="loading" id="research-loading"><div class="spinner"></div>Building your intelligence brief…</div>
      <div class="error-msg" id="research-error"></div>

      <div class="result-box" id="research-result">
        <button class="copy-btn" onclick="copyResult('research-output')">Copy</button>
        <div class="stream-output" id="research-output"></div>
      </div>
    </div>

    <!-- ── PANEL 8: INTERVIEW PREP ── -->
    <div class="panel" id="panel-interview-prep">
      <div class="panel-title">Interview <em>Prep Studio</em></div>
      <div class="divider"></div>
      <div class="panel-desc">Generates the 10 most likely interview questions for this specific role, then crafts a tailored STAR-method answer for each one — pulled directly from your real accomplishments. Read these before your interview, not generic tips.</div>

      <div class="step-hint">Save a job description first. The more specific the JD, the sharper the questions and answers.</div>

      <label>Interview stage</label>
      <div class="tab-row" id="interview-stage-tabs">
        <div class="tab active" data-stage="phone">Phone Screen</div>
        <div class="tab" data-stage="hiring">Hiring Manager</div>
        <div class="tab" data-stage="panel">Panel / Final</div>
      </div>

      <label>Resume to draw stories from</label>
      <div class="resume-pills" id="interview-resume-pills">
        <div class="pill selected" data-resume="principal_ds">Principal Design Strategist</div>
        <div class="pill" data-resume="service_designer">Principal Service Designer</div>
        <div class="pill" data-resume="product_designer">Lead Product Designer</div>
        <div class="pill" data-resume="chief_of_staff">Chief of Staff</div>
      </div>

      <label>Anything you want to make sure comes up? (optional)</label>
      <textarea id="interview-focus" placeholder="e.g., I want to make sure I highlight the Kroger NPS story and the $270M trailer finding. I'm nervous about the 'gap' question…" rows="4"></textarea>

      <div class="btn-row">
        <button class="btn" id="gen-interview-btn">Generate Interview Prep</button>
      </div>

      <div class="loading" id="interview-loading"><div class="spinner"></div>Building your prep guide…</div>
      <div class="error-msg" id="interview-error"></div>

      <div class="result-box" id="interview-result">
        <button class="copy-btn" onclick="copyResult('interview-output')">Copy</button>
        <div class="stream-output" id="interview-output"></div>
      </div>
    </div>

    <!-- ── PANEL 9: LINKEDIN OUTREACH ── -->
    <div class="panel" id="panel-linkedin-outreach">
      <div class="panel-title">LinkedIn <em>Outreach</em></div>
      <div class="divider"></div>
      <div class="panel-desc">Craft warm, specific outreach messages — connection requests, informational interview asks, referral requests, or follow-ups after applying. These are written to feel human and earn a reply, not generic InMail.</div>

      <div class="form-row">
        <div>
          <label>Their Name *</label>
          <input type="text" id="li-name" placeholder="e.g., Jordan Reeves">
        </div>
        <div>
          <label>Their Title & Company *</label>
          <input type="text" id="li-title" placeholder="e.g., VP of Design Strategy at Accenture Federal">
        </div>
      </div>

      <label>What do you know about them? (LinkedIn bio, mutual connections, recent posts, etc.)</label>
      <textarea id="li-context" placeholder="e.g., We have 3 mutual connections, she recently posted about human-centered design in government, previously at USDS…" rows="4"></textarea>

      <label>Message type</label>
      <div class="tab-row" id="li-type-tabs">
        <div class="tab active" data-litype="connect">Connection Request</div>
        <div class="tab" data-litype="info">Informational Ask</div>
        <div class="tab" data-litype="referral">Referral Request</div>
        <div class="tab" data-litype="followup">Post-Application Follow-Up</div>
      </div>

      <label>Goal of this outreach</label>
      <textarea id="li-goal" placeholder="e.g., I want to get on her radar before I formally apply, ask for a 20-minute call, learn about the team culture…" rows="3"></textarea>

      <div class="btn-row">
        <button class="btn" id="gen-li-btn">Generate Message</button>
      </div>

      <div class="loading" id="li-loading"><div class="spinner"></div>Crafting your message…</div>
      <div class="error-msg" id="li-error"></div>

      <div class="result-box" id="li-result">
        <button class="copy-btn" onclick="copyResult('li-output')">Copy</button>
        <div class="stream-output" id="li-output"></div>
      </div>
    </div>

    <!-- ── PANEL 10: SALARY & RECRUITER INTEL ── -->
    <div class="panel" id="panel-salary-intel">
      <div class="panel-title">Salary &amp; <em>Recruiter Intel</em></div>
      <div class="divider"></div>
      <div class="panel-desc">Two tools in one: (1) Salary research and negotiation prep — know your number, frame your ask, and handle lowballs. (2) Recruiter vetting — when multiple recruiters reach out for the same role, figure out who's primary, who's a middleman, and how to protect yourself from duplicate submissions.</div>

      <div class="tab-row" id="salary-mode-tabs">
        <div class="tab active" data-salmode="salary">Salary Research &amp; Negotiation</div>
        <div class="tab" data-salmode="recruiter">Recruiter Vetting</div>
      </div>

      <!-- SALARY SUB-PANEL -->
      <div id="salary-sub">
        <label>Role Title *</label>
        <input type="text" id="sal-role" placeholder="e.g., Principal Service Designer, Design Strategy Director">

        <div class="form-row">
          <div>
            <label>Location / Remote</label>
            <input type="text" id="sal-location" placeholder="e.g., Remote, Washington DC, San Francisco">
          </div>
          <div>
            <label>Company Type</label>
            <input type="text" id="sal-company-type" placeholder="e.g., Federal contractor, Fortune 500, Startup, Nonprofit">
          </div>
        </div>

        <label>Salary mentioned in JD or by recruiter (optional)</label>
        <input type="text" id="sal-offered" placeholder="e.g., $130K–$160K, or recruiter said 'around $140K'">

        <label>What happened / your situation (optional)</label>
        <textarea id="sal-situation" placeholder="e.g., Three different recruiters reached out for what looks like the same role at different salary ranges: $130K, $145K, and $165K. I don't know who to respond to or how to negotiate…" rows="4"></textarea>

        <div class="btn-row">
          <button class="btn" id="gen-salary-btn">Research Salary &amp; Build Strategy</button>
        </div>

        <div class="loading" id="salary-loading"><div class="spinner"></div>Researching salary data and building your strategy…</div>
        <div class="error-msg" id="salary-error"></div>

        <div class="result-box" id="salary-result">
          <button class="copy-btn" onclick="copyResult('salary-output')">Copy</button>
          <div class="stream-output" id="salary-output"></div>
        </div>
      </div>

      <!-- RECRUITER VETTING SUB-PANEL -->
      <div id="recruiter-sub" style="display:none;">
        <div class="step-hint">⚠️ Important: In staffing, whoever submits your resume first "owns" your candidacy for that role. If two agencies submit you, the employer may disqualify you entirely. Use this tool to vet before you respond.</div>

        <label>Role you were contacted about *</label>
        <input type="text" id="rec-role" placeholder="e.g., Principal Service Designer at Dept. of Health">

        <label>How many recruiters reached out, and what do you know about each?</label>
        <textarea id="rec-info" placeholder="e.g., Recruiter 1: Sarah at Accenture, mentioned $145K, said role is with a federal client, reached out via LinkedIn. Recruiter 2: 'Mike' from TechStaff Inc, email only, no company details, $130K. Recruiter 3: Jennifer at Booz Allen, $165K, gave me a job req number JR-4821…" rows="6"></textarea>

        <label>Job description or details you have</label>
        <textarea id="rec-jd" placeholder="Paste any JD text, job title, or details shared by any of the recruiters…" rows="5"></textarea>

        <div class="btn-row">
          <button class="btn" id="gen-recruiter-btn">Analyze &amp; Vet Recruiters</button>
        </div>

        <div class="loading" id="recruiter-loading"><div class="spinner"></div>Analyzing recruiter signals…</div>
        <div class="error-msg" id="recruiter-error"></div>

        <div class="result-box" id="recruiter-result">
          <button class="copy-btn" onclick="copyResult('recruiter-output')">Copy</button>
          <div class="stream-output" id="recruiter-output"></div>
        </div>
      </div>
    </div>

  </main>
</div>

<script>
// ─── RESUME CONTENT ───────────────────────────────────────────────────────────
const RESUMES = {
  principal_ds: {
    label: "Principal Design Strategist",
    text: `CARA A. BROWN, MBA — PRINCIPAL DESIGN STRATEGIST + SERVICE DESIGN + ENTERPRISE STRATEGY
(202) 489-9901 · hi@caraabrown.com · linkedin.com/in/caraabrown · caraabrown.com

SYNOPSIS
Principal Design Strategist with 15+ years of experience leading enterprise-scale strategy, service design, and systems transformation across complex, regulated, and multi-stakeholder environments. Trusted partner to C-suite and EVP leaders, translating ambiguity into clear strategic direction, executable roadmaps, and measurable business outcomes.
Expert in enterprise service design, systems thinking, and insight synthesis, driving alignment across Product, Engineering, Operations, Finance, and Legal. Proven record of institutionalizing new metrics, unlocking multi-million-dollar value, and shaping long-horizon strategies through executive-ready narratives and decision frameworks.

CORE COMPETENCIES
DESIGN STRATEGY & ENTERPRISE TRANSFORMATION: Design Strategy | Principal-Level Service Design | Enterprise Experience Strategy | Systems Thinking | Complex Ecosystem Design | Experience Vision & Principles | New Service & New Market Design | Opportunity Framing & Prioritization | Long-Horizon Strategy & Futures Forecasting | Business & Operating Model Design
SERVICE DESIGN & EXPERIENCE ARCHITECTURE: End-to-End Service Design | Service Blueprinting (Enterprise/Multi-System) | Customer Journey Mapping & Orchestration | Lifecycle Experience Design | B2B & Mid-Market Onboarding | Omnichannel Experience Strategy | Experience Prototyping | Feasibility & Adoption Assessment
INSIGHT, RESEARCH & STRATEGIC ANALYSIS: Qualitative & Quantitative Research | Insight Synthesis | Root Cause Analysis | Systems Diagnosis | Operational Diagnostics | Opportunity Sizing | Hypothesis Development | Constraint Identification | Data-Informed Decision Support | Market Informed Concept Validation
STRATEGY EXECUTION & BUSINESS IMPACT: Strategy-to-Execution Translation | Implementation Roadmaps | KPI & Measurement Strategy | Success Metrics Definition | Value Realization | Governance Models | Decision Frameworks | Portfolio-Level Impact Tracking | Strategic Portfolio Management | Investment Prioritization
EXECUTIVE & CROSS-FUNCTIONAL LEADERSHIP: C-Suite & EVP Partnership | Executive Facilitation | Influence Without Authority | Cross-Functional Alignment (Product, Engineering, Operations, Finance, Legal) | Stakeholder Management | Executive Narrative Development | Board & Leadership Materials
OPERATIONAL & ORGANIZATIONAL EFFECTIVENESS: Process Redesign | Workflow Optimization | Capability Mapping | Change Management | Organizational Design | Performance Governance | Operating Cadences | Scalable Systems Building

PROFESSIONAL HISTORY
KROGER | Senior Service Designer, Transportation & Logistics | Cincinnati, OH (Remote) 03/2022 – 09/2025
• Served as Principal Design Strategist on a CEO-identified, enterprise-critical initiative addressing driver experience across 30+ distribution centers, operating as a strategic partner to EVP- and C-suite leaders.
• Led end-to-end enterprise service design across a complex, multi-system ecosystem spanning people, process, policy, and technology; produced executive-ready service blueprints, journey maps, and systems diagnostics.
• Designed and launched an enterprise-wide service health measurement and feedback program driving driver satisfaction from 36% → 74%, NPS from –36 → +49, amenity satisfaction 37% → 78%, unload-time satisfaction 36% → 78%.
• Institutionalized Net Promoter Score (NPS) as a permanent distribution center performance metric; work recognized via Chief HR Officer-led presentation at the Qualtrics Conference.
• Revived a previously stalled enterprise trailer-tracking initiative by quantifying ~$15M/week in loss exposure at a single DC; extrapolated to ~$270M/week enterprise-wide and drove implementation of an enterprise tracking solution.
• Selected to support enterprise-wide TMS/WMS replacement, defining service vision, adoption strategy, and governance; increased system adoption by 20%.
• Co-authored the 2024–2027 Transportation Strategy, extending the enterprise Supply Chain Strategy into a transportation-specific roadmap.
• Selected as one of five senior contributors supporting Kroger–Albertsons merger integration.

THE REALREAL | E-Commerce Center Coordinator - Fine Jewelry & Watches | Brisbane, CA 03/2019 – 03/2021
• Led service and systems redesign across five U.S. e-commerce authentication centers.
• Reduced customer inquiry backlog by 80% (230 → 40), increased inventory control accuracy by 15%, reduced operational shrink by 10%, recovered $50K in high-value inventory.
• Designed a future-state internal authentication service model in response to COVID-19 disruption.

FOSTER BRAND | Principal Design Strategist | Brooklyn, NY 07/2016 - 03/2019
• Led end-to-end design strategy and product leadership for a new market offering.
• Built the business case, financial model, and success metrics; achieved market traction within three months.
• Secured first right of refusal from a national distributor.

LAMONT BISHOP GALLERY | Founding Director, Strategy & Operations | Washington, DC + Brooklyn, NY 05/2010 – Present
• Designed an innovative art gallery business model using design strategy and service design, sustained 15+ years.
• Scaled to three physical locations; international presence at Art Basel across three countries.
• Acquisition and public exhibition of a never-before-seen Basquiat collection.

EAST OAKLAND YOUTH DEVELOPMENT CENTER | Director of Communications & Assessments | Oakland, CA 02/2015 - 07/2016
• Secured a $500K PropelNext grant through data-driven retrospective analysis.
• Raised $31K in two months via #CloseTheGap peer-to-peer fundraising model; won two Gold MarCom Awards.

GARDAWORLD | Global Marketing Coordinator + Employee Communications | Boca Raton, FL 12/2010 - 03/2012
• Led enterprise-wide employee engagement platform launch; 12% reduction in employee theft, 20% increase in job attendance.

EDUCATION
MBA, Design Strategy — California College of the Arts (2014)
BBA, International Business & Marketing — Howard University (2008)
LUMA Practitioner – Human-Centered Design | MIT xPro – Organizational Strategy and Capabilities

TECHNICAL SKILLS: Miro | Mural | FigJam | Figma | Sketch | Adobe Creative Suite | Confluence | Google Workspace | Microsoft Suite`
  },

  principal_ds_brief: {
    label: "Design Strategist (Brief)",
    text: `CARA A. BROWN, MBA — PRINCIPAL DESIGN STRATEGIST + SERVICE DESIGN + ENTERPRISE STRATEGY
(202) 489-9901 · hi@caraabrown.com · caraabrown.com

SYNOPSIS
Principal Design Strategist with 15+ years leading enterprise-scale strategy, service design, and systems transformation. Trusted partner to C-suite and EVP leaders, translating ambiguity into strategic direction, executable roadmaps, and measurable business outcomes.

CORE COMPETENCIES (ABBREVIATED)
Design Strategy | Service Design | Enterprise Experience Strategy | Systems Thinking | Service Blueprinting | Journey Mapping | Qualitative & Quantitative Research | Insight Synthesis | Root Cause Analysis | Strategy-to-Execution | KPI Frameworks | Executive Facilitation | Cross-Functional Leadership | Change Management

KROGER | Senior Service Designer | 03/2022 – 09/2025
• Served as Principal Design Strategist on CEO-identified initiative improving driver experience across 30+ distribution centers.
• Drove satisfaction 36%→74%, NPS –36→+49; institutionalized NPS as permanent enterprise metric recognized at Qualtrics Conference.
• Quantified ~$15M/week in trailer losses at single DC, ~$270M/week enterprise-wide; drove implementation of tracking solution.
• Increased system adoption by 20% on TMS/WMS replacement; co-authored 2024–2027 Transportation Strategy.
• Selected for Kroger–Albertsons merger integration team (one of five).

THE REALREAL | E-Commerce Coordinator | 03/2019 – 03/2021
• Reduced inquiry backlog 80%, improved inventory accuracy 15%, recovered $50K inventory across five authentication centers.

FOSTER BRAND | Principal Design Strategist | 07/2016 - 03/2019
• Led net-new product from concept to market traction in 3 months; secured first right of refusal from national distributor.

LAMONT BISHOP GALLERY | Founding Director | 05/2010 – Present
• Sustained 15+ year gallery operation; scaled to 3 locations, Art Basel international presence, Basquiat collection.

MBA, Design Strategy — California College of the Arts | BBA — Howard University`
  },

  service_designer: {
    label: "Principal Service Designer",
    text: `CARA A BROWN, MBA — DESIGN STRATEGIST + SERVICE DESIGNER + PROBLEM SOLVER
(202) 489-9901 · hi@caraabrown.com · caraabrown.com

SYNOPSIS
Principal Service Designer with 15+ years of experience leading end-to-end service design and digital transformation initiatives across public-sector and enterprise environments. Deep expertise in human-centered design, service research, journey mapping, service blueprinting, and experience prototyping to improve usability, accessibility, and operational efficiency at scale.
Proven leader within cross-functional Agile teams, translating user research and behavioral insights into actionable service improvements, delivery roadmaps, and policy- and operations-aligned recommendations. Known for facilitating co-design workshops with executives, delivery teams, and frontline staff, championing change management, user adoption, and continuous service improvement across complex, multi-stakeholder systems.

HIGHLIGHTS
END-TO-END SERVICE DESIGN & DELIVERY: Service Design & Human-Centered Design | Qualitative Research & Ethnography | Journey Mapping | Service Blueprinting | Systems Mapping & Ecosystem Analysis | Giga Mapping | Insight Synthesis & Problem Framing | Future-State Service Modeling | Business Modeling | Service Requirements & Experience Principles | Implementation & Pilot Planning | Digital Service Design | Accessibility & Inclusive Design | Service Performance Measurement | Continuous Improvement Cycles

FACILITATION, ALIGNMENT & CO-CREATION: Workshop Design & Facilitation | Cross-Functional Alignment (Product, Engineering, Operations, HR) | Executive Briefing | Co-design Workshops | Design Sprints | Stakeholder Alignment Across Ministries/Agencies | Executive & Frontline Facilitation

SYSTEMS THINKING & OPERATIONAL DIAGNOSIS: Systems Diagnosis | Root Cause Analysis | Operational & Workflow Evaluation | Capability Mapping | Constraint Identification | Experience & Process Redesign | Feasibility & Adoption Assessment

TRANSLATING STRATEGY INTO ACTION: Service Strategy Development | Experience Roadmaps | Decision-Support Artifacts | Metrics & Success Definition | KPI Alignment | Agile Backlog Integration | User Stories & Acceptance Criteria | Service KPIs & Outcomes Tracking

TOOLS: Figma | Miro | Adobe Creative Suite | FigJam | Confluence | Microsoft 365

PROFESSIONAL HISTORY
KROGER | Senior Service Designer, Transportation & Logistics | 03/2022 – 09/2025
• Led CEO-identified, enterprise-critical service design initiative addressing driver experience across 20+ distribution centers.
• Designed and deployed enterprise-wide, gamified service feedback and measurement program—journey maps, service blueprints, experience principles.
• Delivered: driver satisfaction 36%→74%, NPS –36→+49; institutionalized NPS as permanent metric, presented at Qualtrics Conference.
• Conducted service design research: user interviews, contextual inquiry, on-site observation with drivers, frontline staff, leadership.
• Facilitated co-design workshops and design sprints with executives, delivery teams, frontline users.
• Revived stalled trailer-tracking initiative: quantified $15M/week losses, integrated into Agile backlogs, user stories, acceptance criteria.
• Led large-scale digital transformation across enterprise platforms collaborating with IT, engineering, policy-adjacent stakeholders.
• Contributed to Kroger–Albertsons merger integration.
• Co-authored 2024–2027 Transportation Strategy: facilitated enterprise kickoff workshops, 1:1 sessions, built KPI framework.

THE REALREAL | E-Commerce Center Coordinator | 03/2019 – 03/2021
• Redesigned end-to-end operational workflows across five U.S. e-commerce centers; 10% reduction in operational shrink.
• Redesigned frontstage/backstage workflows; recovered $50K in high-value jewelry; reduced inquiry backlog 80%.

FOSTER BRAND | Principal Design Strategist | 07/2016 - 03/2019
• Led end-to-end discovery and validation; designed user journeys, service flows, clickable prototype; product–market fit in 3 months.
• Authored product vision, success metrics, user-informed roadmap; investor roadshow resulted in first right of refusal from national distributor.

EDUCATION: MBA Design Strategy, California College of the Arts | BBA, Howard University`
  },

  product_designer: {
    label: "Lead Product Designer",
    text: `CARA A. BROWN, MBA — LEAD PRODUCT DESIGNER + PRODUCT STRATEGY + SYSTEMS DESIGN
(202) 489-9901 · hi@caraabrown.com · caraabrown.com

SYNOPSIS
Lead Product Designer with 15+ years of experience designing and launching net-new digital products, platforms, and services across FinTech-adjacent, enterprise, and regulated environments. Operates at the intersection of product strategy, design execution, and business outcomes, partnering with Product, Engineering, Data, and Executive leadership to translate ambiguity into MVPs, scalable systems, and measurable growth.

CORE COMPETENCIES
PRODUCT DESIGN & STRATEGY: End-to-End Product Design | New Product Development | MVP Definition | Product Discovery | Value Proposition Design | Growth & Experimentation | User Journeys & Flows | High-Fidelity Prototyping | Responsive & Accessible Design
RESEARCH INFORMED DESIGN: User Research (Qual & Quant) | Usability Testing | Behavioral Insights | Metrics & KPIs | Funnel Analysis | Insight Synthesis | Experiment Validation
SYSTEMS & PLATFORMS: Design Systems (Creation & Evolution) | Platform Design | Multi-Surface Experiences (Web & Mobile) | Scalable UX Governance
TOOLS: Figma | FigJam | Miro | Adobe Creative Suite | Confluence | Jira | Google Workspace

PROFESSIONAL HISTORY
KROGER | Sr. Service Designer (Lead Product Designer, Platform & Systems) | 03/2022 – 09/2025
• Led end-to-end product and service design for CEO-identified, enterprise-critical digital initiative spanning 30+ distribution centers.
• Partnered with Product, Engineering, Operations, Finance, HR, Legal to define product strategy, user journeys, MVP scope, and phased rollout.
• Designed and launched new digital service and measurement platform; increased driver satisfaction 36%→74%, NPS –36→+49.
• Defined success metrics and dashboards; institutionalized NPS as permanent enterprise KPI adopted by EVP of Supply Chain.
• Revived stalled digital tracking product; quantified $15M/week loss at single site; scaled across 34 sites to inform enterprise investment.
• Delivered high-fidelity prototypes, service blueprints, and experience principles used by engineering teams.
• Contributed to Kroger–Albertsons merger product and design leadership.
• Co-authored 2024–2027 Transportation Product & Service Strategy; vision, roadmap, KPIs, governance.
• Led discovery, experience vision, and MVP definition for TMS/WMS platform replacement; increased system adoption by 20%.

THE REALREAL | E-Commerce Center Coordinator | 03/2019 – 03/2021
• Designed and improved internal digital tools and workflows across five U.S. fulfillment centers.
• Reduced customer inquiry backlog 80%, improved inventory accuracy 15%, recovered $50K in high-value inventory.

FOSTER BRAND | Principal Design Strategist | 07/2016 - 03/2019
• Led net-new product development from concept through MVP for B2B digital product; first right of refusal from national distributor in 3 months.

EDUCATION: MBA Design Strategy, California College of the Arts | BBA, Howard University`
  },

  chief_of_staff: {
    label: "Chief of Staff",
    text: `CARA A BROWN, MBA — DESIGN STRATEGIST + SERVICE DESIGNER + PROBLEM SOLVER
Chief of Staff–level strategic operator with 10+ years driving enterprise alignment, executive decision-making, organizational clarity, and cross-functional execution.
(202) 489-9901 · hi@caraabrown.com · caraabrown.com

SYNOPSIS
Expert in strategic planning, operating rhythms, annual and quarterly business reviews, OKR and KPI development, and governance systems. Recognized for synthesizing ambiguity, framing critical issues, and delivering executive-ready materials—board updates, performance dashboards, strategic narratives, decision briefs. Trusted advisor to C-suite leaders with deep experience orchestrating multi-disciplinary initiatives. Skilled in building operating models, standardizing workflows, leading cross-functional rhythm-of-business cadences.

HIGHLIGHTS
STRATEGIC PLANNING & EXECUTION: Annual & Quarterly Business Planning | Operating Rhythms | OKR Development & Alignment | KPI & Dashboard Design | Initiative Prioritization | Strategic Roadmapping | Executive Decision Support | Change Management
EXECUTIVE COMMUNICATIONS: Executive-Ready Briefings | Board Materials | Strategic Narratives | Performance Reviews | Messaging Frameworks | Insights Synthesis | Stakeholder Enablement
BUSINESS OPERATIONS: Governance Systems | Process Optimization | Cross-Functional Workflow Design | Operational Diagnostics | Meeting Architecture | Operating Model Development | Resource & Capacity Planning
CROSS-FUNCTIONAL LEADERSHIP: C-Suite Partnership | Influence Without Authority | Executive Stakeholder Management | Partner & Vendor Management | Multi-Team Collaboration (Product, Engineering, HR, Finance, Legal, Operations)
ANALYTICS & PROBLEM SOLVING: Data Analysis & Visualization | Root Cause Identification | Scenario Modeling | Business Performance Monitoring | Research & Insight Synthesis

PROFESSIONAL HISTORY
KROGER | Senior Service Designer, Transportation & Logistics | 03/2022 – 09/2025
• Served as strategic advisor to EVP of Supply Chain on CEO-prioritized enterprise initiative across 20+ distribution centers.
• Built executive decision-making clarity via performance dashboards, KPI frameworks, and insight narratives; quantified ~$50M/week trailer loss.
• Operated in Chief of Staff–style capacity to EVP of Transportation; drove enterprise operations, executive alignment, KPI governance.
• Designed and operationalized 2024–2027 Transportation Strategy; multi-year roadmap with measurable goals and execution mechanisms.
• Directed cross-functional collaboration across Product, Operations, HR, Finance, Engineering, Legal.
• Selected as one of five contributors supporting Kroger–Albertsons merger executive integration work.

THE REALREAL | E-Commerce Center Coordinator | 03/2019 – 03/2021
• Improved performance across five distributed authentication centers through workflow diagnosis and standardized processes.
• Reduced inquiry backlog 80%, increased inventory control 15%; cross-functional liaison across Sales, Gemology, Operations, Authentication.

FOSTER BRAND | Principal Design Strategist | 07/2016 - 03/2019
• Led cross-functional team through full product lifecycle; developed business case, financial model, operational requirements.
• Secured first right of refusal from national distributor.

EAST OAKLAND YOUTH DEVELOPMENT CENTER | Director of Communications & Assessments | 02/2015 - 07/2016
• Secured $500K PropelNext grant through data-driven retrospective analysis and executive narrative.
• Led center-wide modernization of operational and communication workflows; raised $31K in 2 months.

GARDAWORLD | Global Marketing Coordinator + Employee Communications | 12/2010 - 03/2012
• Prepared quarterly board meeting materials; presented to executive board in Montreal.
• Led organization-wide employee experience initiative; improved alignment across distributed teams.

EDUCATION: MBA Design Strategy, California College of the Arts | BBA, Howard University`
  }
};

const CARA_BIO = `Cara A. Brown, MBA is a Principal Design Strategist and Service Designer with 15+ years of experience. Website: caraabrown.com. She specializes in enterprise-scale strategy, service design, and systems transformation. Key career highlights: led CEO-identified Kroger initiative driving NPS from -36 to +49, quantified $270M/week in enterprise risk and drove solutions, co-authored 2024-2027 Transportation Strategy, selected for Kroger-Albertsons merger integration team, secured $500K grant at EOYDC, sustained a 15+ year art gallery business scaling to international Art Basel presence. Education: MBA Design Strategy (California College of the Arts), BBA International Business & Marketing (Howard University). She is known for translating ambiguity into executive-ready narratives and measurable outcomes.`;

// ─── STATE ────────────────────────────────────────────────────────────────────
let savedJD = '';
let savedJDUrl = '';
let savedRoleName = '';
let selectedResumesForATS = new Set(['principal_ds','principal_ds_brief','service_designer','product_designer','chief_of_staff']);
let selectedResumeForCL = 'principal_ds';
let selectedCLTone = 'strategic';

// ─── NAVIGATION ──────────────────────────────────────────────────────────────
document.querySelectorAll('nav a[data-panel]').forEach(link => {
  link.addEventListener('click', e => {
    e.preventDefault();
    const panelId = link.dataset.panel;
    document.querySelectorAll('nav a').forEach(l => l.classList.remove('active'));
    document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
    link.classList.add('active');
    document.getElementById('panel-' + panelId).classList.add('active');
  });
});

// ─── RESUME PILLS (ATS) ───────────────────────────────────────────────────────
document.querySelectorAll('#panel-ats-check .pill').forEach(pill => {
  pill.addEventListener('click', () => {
    pill.classList.toggle('selected');
    const r = pill.dataset.resume;
    if (pill.classList.contains('selected')) selectedResumesForATS.add(r);
    else selectedResumesForATS.delete(r);
  });
});

// ─── COVER LETTER PILLS (single select) ──────────────────────────────────────
document.querySelectorAll('#cl-resume-pills .pill').forEach(pill => {
  pill.addEventListener('click', () => {
    document.querySelectorAll('#cl-resume-pills .pill').forEach(p => p.classList.remove('selected'));
    pill.classList.add('selected');
    selectedResumeForCL = pill.dataset.resume;
  });
});

// ─── COVER LETTER TONE TABS ───────────────────────────────────────────────────
document.querySelectorAll('#cl-tone .tab').forEach(tab => {
  tab.addEventListener('click', () => {
    document.querySelectorAll('#cl-tone .tab').forEach(t => t.classList.remove('active'));
    tab.classList.add('active');
    selectedCLTone = tab.dataset.tone;
  });
});

// ─── SAVE JD ──────────────────────────────────────────────────────────────────
document.getElementById('save-jd-btn').addEventListener('click', () => {
  savedJD = document.getElementById('jd-text').value.trim();
  savedJDUrl = document.getElementById('jd-url').value.trim();
  savedRoleName = document.getElementById('job-role-name').value.trim();
  if (!savedJD) { alert('Please paste a job description first.'); return; }
  document.getElementById('jd-saved-msg').style.display = 'block';
  setTimeout(() => {
    document.querySelector('nav a[data-panel="ats-check"]').click();
  }, 800);
});

// ─── API CALL HELPER ─────────────────────────────────────────────────────────
async function callClaude(systemPrompt, userMessage, onChunk) {
  const apiKey = localStorage.getItem('cara_api_key') || '';
  if (!apiKey) {
    throw new Error('No API key saved. Click ⚙ Settings in the header to add your Anthropic API key.');
  }
  const response = await fetch("https://api.anthropic.com/v1/messages", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      "x-api-key": apiKey,
      "anthropic-version": "2023-06-01",
      "anthropic-dangerous-direct-browser-access": "true"
    },
    body: JSON.stringify({
      model: "claude-sonnet-4-20250514",
      max_tokens: 4000,
      stream: true,
      system: systemPrompt,
      messages: [{ role: "user", content: userMessage }]
    })
  });

  if (!response.ok) throw new Error(`API error: ${response.status}`);
  const reader = response.body.getReader();
  const decoder = new TextDecoder();
  let buffer = '';
  let fullText = '';

  while (true) {
    const { done, value } = await reader.read();
    if (done) break;
    buffer += decoder.decode(value, { stream: true });
    const lines = buffer.split('\n');
    buffer = lines.pop();
    for (const line of lines) {
      if (line.startsWith('data: ')) {
        const data = line.slice(6);
        if (data === '[DONE]') continue;
        try {
          const parsed = JSON.parse(data);
          if (parsed.type === 'content_block_delta' && parsed.delta?.text) {
            fullText += parsed.delta.text;
            onChunk(fullText);
          }
        } catch {}
      }
    }
  }
  return fullText;
}

// ─── ATS CHECK ───────────────────────────────────────────────────────────────
document.getElementById('run-ats-btn').addEventListener('click', async () => {
  const jd = savedJD || document.getElementById('jd-text').value.trim();
  if (!jd) { showError('ats-error', 'Please save a job description in Step 01 first.'); return; }
  if (selectedResumesForATS.size === 0) { showError('ats-error', 'Please select at least one resume.'); return; }

  const resumeTexts = [...selectedResumesForATS].map(key => ({
    key,
    label: RESUMES[key].label,
    text: RESUMES[key].text
  }));

  showLoading('ats-loading');
  hideError('ats-error');
  document.getElementById('ats-result').classList.remove('visible');

  const systemPrompt = `You are an expert ATS (Applicant Tracking System) analyst and resume coach. You analyze resumes against job descriptions with deep expertise in keyword matching, skills alignment, and recruiter psychology. Be precise, data-driven, and actionable.`;

  const resumeBlock = resumeTexts.map((r, i) => `RESUME ${i+1}: ${r.label}\n---\n${r.text}`).join('\n\n======\n\n');

  const userMsg = `JOB DESCRIPTION:
${jd}
${savedJDUrl ? `\nJob URL: ${savedJDUrl}` : ''}
${savedRoleName ? `\nRole: ${savedRoleName}` : ''}

RESUMES TO ANALYZE:
${resumeBlock}

Please perform a comprehensive ATS analysis. For each resume:

1. **ATS SCORE**: Give a percentage score (0-100%) based on:
   - Keyword match rate with the JD (weighted 40%)
   - Skills and competency alignment (weighted 30%)
   - Experience relevance and level match (weighted 20%)
   - Format/structure optimization for ATS parsing (weighted 10%)

2. **FORMAT FOR SCORES**: Output each score on its own line exactly like this:
SCORE: [Resume Name] = [XX]%

3. **DETAILED ANALYSIS**: After all scores, provide:
   - Which resume is the BEST match and why
   - Top 5-7 keywords/phrases from the JD that are missing or underrepresented in the best-matching resume
   - Specific, actionable edits that would push the BEST resume's score above 95%:
     * Exact phrases to add
     * Sections to rewrite
     * Skills to add to the competencies section
   - Red flags (if any) — things that might cause an ATS to reject or downrank

Be thorough and specific. Quote exact phrases from the JD when suggesting additions.`;

  try {
    const result = document.getElementById('ats-detail-output');
    result.textContent = '';
    document.getElementById('ats-result').classList.add('visible');

    let fullText = '';
    await callClaude(systemPrompt, userMsg, (text) => {
      // Parse scores for score cards
      document.getElementById('score-cards-container').innerHTML = '';
      const scoreMatches = [...text.matchAll(/SCORE:\s*(.+?)\s*=\s*(\d+)%/g)];
      if (scoreMatches.length > 0) {
        scoreMatches.forEach(match => {
          const name = match[1].trim();
          const pct = parseInt(match[2]);
          const colorClass = pct >= 80 ? 'score-high' : pct >= 60 ? 'score-mid' : 'score-low';
          document.getElementById('score-cards-container').innerHTML += `
            <div class="score-card">
              <div class="score-num ${colorClass}">${pct}%</div>
              <div class="score-label">${name}</div>
            </div>`;
        });
      }
      // Show full text minus score lines in the detail output
      const cleanText = text.replace(/SCORE:.*=.*%\n?/g, '').trim();
      result.textContent = cleanText;
      fullText = text;
    });

  } catch (err) {
    showError('ats-error', 'Something went wrong: ' + err.message);
    document.getElementById('ats-result').classList.remove('visible');
  } finally {
    hideLoading('ats-loading');
  }
});

// ─── REVISED RESUME CHECK ─────────────────────────────────────────────────────
document.getElementById('recheck-btn').addEventListener('click', async () => {
  const jd = savedJD || document.getElementById('jd-text').value.trim();
  const updatedResume = document.getElementById('updated-resume-text').value.trim();
  if (!jd) { showError('recheck-error', 'Please save a job description in Step 01 first.'); return; }
  if (!updatedResume) { showError('recheck-error', 'Please paste your updated resume text.'); return; }

  showLoading('recheck-loading');
  hideError('recheck-error');
  document.getElementById('recheck-result').classList.remove('visible');

  const systemPrompt = `You are an expert ATS analyst. Provide precise, actionable resume analysis.`;
  const userMsg = `JOB DESCRIPTION:
${jd}

UPDATED RESUME:
${updatedResume}

Run a comprehensive ATS check on this revised resume:

1. **Overall ATS Score**: Give a percentage (0-100%)
2. **Keyword Match**: List matched keywords and any still missing
3. **Score Improvement**: Compare to what a typical unoptimized resume would score
4. **Remaining Gaps**: Any final tweaks needed to hit 95%+
5. **Ready to Submit?**: Yes/No and why

Be specific and direct.`;

  try {
    const output = document.getElementById('recheck-output');
    output.textContent = '';
    document.getElementById('recheck-result').classList.add('visible');
    await callClaude(systemPrompt, userMsg, text => { output.textContent = text; });
  } catch (err) {
    showError('recheck-error', 'Something went wrong: ' + err.message);
    document.getElementById('recheck-result').classList.remove('visible');
  } finally {
    hideLoading('recheck-loading');
  }
});

// ─── COVER LETTER ─────────────────────────────────────────────────────────────
document.getElementById('gen-cl-btn').addEventListener('click', async () => {
  const jd = savedJD || document.getElementById('jd-text').value.trim();
  if (!jd) { showError('cl-error', 'Please save a job description in Step 01 first.'); return; }

  const resume = RESUMES[selectedResumeForCL];
  const toneMap = {
    strategic: 'strategic, precise, and confident — demonstrating systems-level thinking and enterprise impact without being cold. Authoritative but not stiff.',
    warm: 'warm, personal, and human — showing genuine enthusiasm and personality while maintaining professionalism.',
    executive: 'executive-level confidence — direct, authoritative, and commanding. Every sentence earns its place.'
  };

  showLoading('cl-loading');
  hideError('cl-error');
  document.getElementById('cl-result').classList.remove('visible');

  const systemPrompt = `You are an expert cover letter writer who specializes in crafting highly personalized, compelling cover letters for senior design strategy and service design professionals. You never write generic letters — every sentence is specific, grounded in actual accomplishments, and directly relevant to the target role.`;

  const userMsg = `Write a compelling cover letter for Cara Brown applying to the following role.

JOB DESCRIPTION:
${jd}
${savedRoleName ? `Role: ${savedRoleName}` : ''}
${savedJDUrl ? `URL: ${savedJDUrl}` : ''}

CARA'S RESUME (use this as the primary source):
${resume.text}

ADDITIONAL CONTEXT ABOUT CARA:
${CARA_BIO}
Website: caraabrown.com — case studies and work samples available there.

TONE: ${toneMap[selectedCLTone]}

REQUIREMENTS:
- Address the specific requirements in the JD directly
- Reference 2-3 specific, quantified accomplishments from the resume that are most relevant
- Connect Cara's background explicitly to what the company/role needs
- Mention caraabrown.com naturally as a source for case studies/portfolio
- Do NOT use clichés like "I am excited to apply" or "I am a perfect fit"
- Length: 3-4 tight paragraphs
- Do not include [placeholder] brackets — write the full letter with all details filled in
- End with a strong, confident closing
- Format as a proper letter with date, greeting, body, closing`;

  try {
    const output = document.getElementById('cl-output');
    output.textContent = '';
    document.getElementById('cl-result').classList.add('visible');
    await callClaude(systemPrompt, userMsg, text => { output.textContent = text; });
  } catch (err) {
    showError('cl-error', 'Something went wrong: ' + err.message);
    document.getElementById('cl-result').classList.remove('visible');
  } finally {
    hideLoading('cl-loading');
  }
});

// ─── WHY THIS JOB ─────────────────────────────────────────────────────────────
document.getElementById('gen-why-btn').addEventListener('click', async () => {
  const jd = savedJD || document.getElementById('jd-text').value.trim();
  if (!jd) { showError('why-error', 'Please save a job description in Step 01 first.'); return; }

  const context = document.getElementById('why-context').value.trim();

  showLoading('why-loading');
  hideError('why-error');
  document.getElementById('why-result').classList.remove('visible');

  const systemPrompt = `You are an expert career coach helping senior professionals craft authentic, compelling answers to application essay questions. Your answers are specific, grounded in real experience, and never generic.`;

  const userMsg = `Help Cara Brown answer two questions for this job application:

1. "Why did you choose to apply for this role?"
2. "Why would you be a great fit for this position?"

JOB DESCRIPTION:
${jd}
${savedRoleName ? `Role: ${savedRoleName}` : ''}

CARA'S BACKGROUND:
${CARA_BIO}

${RESUMES.principal_ds.text.substring(0, 2000)}

${context ? `ADDITIONAL PERSONAL NOTES FROM CARA:\n${context}` : ''}

REQUIREMENTS:
- Write these as if Cara is speaking in first person
- Be authentic, specific, and grounded — not generic
- Reference specific elements from the JD that resonate with Cara's actual experience
- Draw on real accomplishments from her background
- Keep each answer to 2-3 focused paragraphs
- Make the connection between her unique trajectory and this specific role feel natural and inevitable

Format as:
WHY I CHOSE THIS ROLE:
[answer]

WHY I WILL BE A GREAT FIT:
[answer]`;

  try {
    const output = document.getElementById('why-output');
    output.textContent = '';
    document.getElementById('why-result').classList.add('visible');
    await callClaude(systemPrompt, userMsg, text => { output.textContent = text; });
  } catch (err) {
    showError('why-error', 'Something went wrong: ' + err.message);
    document.getElementById('why-result').classList.remove('visible');
  } finally {
    hideLoading('why-loading');
  }
});

// ─── CUSTOM Q&A ───────────────────────────────────────────────────────────────
document.getElementById('gen-qa-btn').addEventListener('click', async () => {
  const question = document.getElementById('custom-question').value.trim();
  if (!question) { showError('qa-error', 'Please enter a question.'); return; }

  const wordLimit = document.getElementById('word-limit').value.trim();
  const jd = savedJD;

  showLoading('qa-loading');
  hideError('qa-error');
  document.getElementById('qa-result').classList.remove('visible');

  const systemPrompt = `You are an expert career coach helping senior design strategists craft specific, compelling, and authentic answers to job application questions. Every answer is grounded in real experience and never generic.`;

  const userMsg = `Answer the following application question on behalf of Cara Brown.

QUESTION: ${question}
${wordLimit ? `WORD/LENGTH LIMIT: ${wordLimit}` : ''}

${jd ? `JOB CONTEXT:\n${jd}\n` : ''}
${savedRoleName ? `Role: ${savedRoleName}\n` : ''}

CARA'S BACKGROUND:
${CARA_BIO}

KEY ACCOMPLISHMENTS TO DRAW FROM:
${RESUMES.principal_ds.text.substring(0, 2500)}

REQUIREMENTS:
- Write in first person as Cara
- Use specific, quantified examples wherever possible
- Be authentic — draw on her actual experience at Kroger, The RealReal, Foster Brand, EOYDC, Lamont Bishop Gallery, and Alanne International
- Match the word limit if provided
- Do not use clichés or generic statements — every claim should be supported by evidence from her background
- Write in a confident, professional tone

Write the answer directly (no preamble).`;

  try {
    const output = document.getElementById('qa-output');
    output.textContent = '';
    document.getElementById('qa-result').classList.add('visible');
    await callClaude(systemPrompt, userMsg, text => { output.textContent = text; });
  } catch (err) {
    showError('qa-error', 'Something went wrong: ' + err.message);
    document.getElementById('qa-result').classList.remove('visible');
  } finally {
    hideLoading('qa-loading');
  }
});


// ─── SETTINGS MODAL ───────────────────────────────────────────────────────────
function updateKeyStatus() {
  const key = localStorage.getItem('cara_api_key') || '';
  const msg = document.getElementById('key-status-msg');
  const btn = document.getElementById('settings-open-btn');
  if (key) {
    msg.textContent = '✓ API key saved (' + key.substring(0,12) + '…)';
    msg.className = 'key-status set';
    btn.className = 'settings-btn key-set';
    btn.textContent = '✓ API Key Set';
  } else {
    msg.textContent = 'No API key saved — tools will not work without one.';
    msg.className = 'key-status unset';
    btn.className = 'settings-btn';
    btn.textContent = '⚙ API Key';
  }
}

document.getElementById('settings-open-btn').addEventListener('click', () => {
  const key = localStorage.getItem('cara_api_key') || '';
  document.getElementById('api-key-input').value = key ? key : '';
  updateKeyStatus();
  document.getElementById('settings-modal').classList.add('open');
});
document.getElementById('settings-close-btn').addEventListener('click', () => {
  document.getElementById('settings-modal').classList.remove('open');
});
document.getElementById('settings-modal').addEventListener('click', (e) => {
  if (e.target === document.getElementById('settings-modal')) {
    document.getElementById('settings-modal').classList.remove('open');
  }
});
document.getElementById('save-key-btn').addEventListener('click', () => {
  const key = document.getElementById('api-key-input').value.trim();
  if (!key || !key.startsWith('sk-')) {
    alert('Please enter a valid Anthropic API key (starts with sk-).');
    return;
  }
  localStorage.setItem('cara_api_key', key);
  updateKeyStatus();
  setTimeout(() => document.getElementById('settings-modal').classList.remove('open'), 800);
});
document.getElementById('clear-key-btn').addEventListener('click', () => {
  localStorage.removeItem('cara_api_key');
  document.getElementById('api-key-input').value = '';
  updateKeyStatus();
});

// Init key status on load
updateKeyStatus();

// ─── JOB TRACKER ──────────────────────────────────────────────────────────────
let jobs = JSON.parse(localStorage.getItem('cara_jobs') || '[]');

function saveJobs() {
  localStorage.setItem('cara_jobs', JSON.stringify(jobs));
}

function getWeekStart() {
  const now = new Date();
  const day = now.getDay(); // 0=Sun
  const diff = now.getDate() - day + (day === 0 ? -6 : 1); // Monday
  const mon = new Date(now.setDate(diff));
  mon.setHours(0,0,0,0);
  return mon;
}

function updateTrackerStats() {
  const total = jobs.length;
  const weekStart = getWeekStart();
  const weekApps = jobs.filter(j => {
    const d = new Date(j.dateApplied);
    return d >= weekStart && j.applied;
  }).length;
  const active = jobs.filter(j => (j.screening || j.interview) && !j.hired).length;

  document.getElementById('stat-total').textContent = total;
  document.getElementById('stat-week').textContent = weekApps;
  document.getElementById('stat-active').textContent = active;

  // Weeks since first application
  if (jobs.length > 0) {
    const sorted = [...jobs].sort((a, b) => new Date(a.dateApplied) - new Date(b.dateApplied));
    const firstDate = new Date(sorted[0].dateApplied);
    const now = new Date();
    const diffDays = Math.floor((now - firstDate) / (1000 * 60 * 60 * 24));
    const weeks = Math.floor(diffDays / 7);
    const days = diffDays % 7;
    document.getElementById('stat-weeks').textContent = weeks === 0 ? '<1' : weeks;
    document.getElementById('stat-since').textContent = weeks === 0
      ? 'Started ' + diffDays + ' day(s) ago'
      : 'Since ' + firstDate.toLocaleDateString('en-US', {month:'short', day:'numeric', year:'numeric'});
  } else {
    document.getElementById('stat-weeks').textContent = '—';
    document.getElementById('stat-since').textContent = 'Since first application';
  }

  // Goal bar (35/week)
  const pct = Math.min(100, Math.round((weekApps / 35) * 100));
  document.getElementById('goal-bar-fill').style.width = pct + '%';
  document.getElementById('goal-bar-pct').textContent = weekApps + ' / 35  (' + pct + '%)';
}

function formatDate(isoStr) {
  const d = new Date(isoStr);
  return d.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
}

function renderJobs() {
  updateTrackerStats();
  const tbody = document.getElementById('jobs-tbody');
  const empty = document.getElementById('jobs-empty');
  const tableWrap = document.getElementById('jobs-table-wrap');

  if (jobs.length === 0) {
    empty.style.display = 'block';
    tableWrap.style.display = 'none';
    return;
  }
  empty.style.display = 'none';
  tableWrap.style.display = 'block';

  // Sort: hired at bottom, then by date desc
  const sorted = [...jobs].sort((a, b) => {
    if (a.hired && !b.hired) return 1;
    if (!a.hired && b.hired) return -1;
    return new Date(b.dateApplied) - new Date(a.dateApplied);
  });

  tbody.innerHTML = sorted.map(j => {
    const isHired = j.hired ? 'hired-row' : '';
    const urlCell = j.url
      ? `<a class="job-link" href="${j.url}" target="_blank">↗ View</a>`
      : '<span style="color:var(--border)">—</span>';
    return `<tr class="${isHired}" data-id="${j.id}">
      <td><strong>${escHtml(j.company)}</strong><br><small style="color:var(--muted);font-size:0.7rem;">${urlCell}</small></td>
      <td>${escHtml(j.role)}</td>
      <td style="font-size:0.75rem;color:var(--muted);">${escHtml(j.source || '—')}</td>
      <td><span class="applied-date">${j.applied ? formatDate(j.dateApplied) : '—'}</span></td>
      <td style="text-align:center;">
        <div class="stage-check-item">
          <input type="checkbox" ${j.applied ? 'checked' : ''} onchange="toggleStage('${j.id}','applied',this.checked)" title="Confirmed Applied">
          <span>Applied</span>
        </div>
      </td>
      <td style="text-align:center;">
        <div class="stage-check-item">
          <input type="checkbox" ${j.screening ? 'checked' : ''} onchange="toggleStage('${j.id}','screening',this.checked)" title="Screening">
          <span>Screen</span>
        </div>
      </td>
      <td style="text-align:center;">
        <div class="stage-check-item">
          <input type="checkbox" ${j.interview ? 'checked' : ''} onchange="toggleStage('${j.id}','interview',this.checked)" title="Interview">
          <span>Interview</span>
        </div>
      </td>
      <td style="text-align:center;">
        <div class="stage-check-item">
          <input type="checkbox" ${j.hired ? 'checked' : ''} onchange="toggleStage('${j.id}','hired',this.checked)" title="Hired!">
          <span>Hired!</span>
        </div>
      </td>
      <td style="font-size:0.75rem;color:var(--muted);max-width:140px;">${escHtml(j.notes || '')}</td>
      <td><button class="delete-job-btn" onclick="deleteJob('${j.id}')" title="Remove">✕</button></td>
    </tr>`;
  }).join('');
}

function escHtml(str) {
  return String(str || '').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}

function toggleStage(id, field, val) {
  const job = jobs.find(j => j.id === id);
  if (!job) return;
  job[field] = val;
  if (field === 'applied' && val && !job.dateApplied) {
    job.dateApplied = new Date().toISOString();
  }
  saveJobs();
  renderJobs();
}

function deleteJob(id) {
  if (!confirm('Remove this application from your tracker?')) return;
  jobs = jobs.filter(j => j.id !== id);
  saveJobs();
  renderJobs();
}

document.getElementById('add-job-btn').addEventListener('click', () => {
  const company = document.getElementById('new-company').value.trim();
  const role = document.getElementById('new-role').value.trim();
  if (!company || !role) {
    alert('Company and Role are required.');
    return;
  }
  const newJob = {
    id: Date.now().toString(),
    company,
    role,
    url: document.getElementById('new-url').value.trim(),
    source: document.getElementById('new-source').value.trim(),
    notes: document.getElementById('new-notes').value.trim(),
    dateApplied: new Date().toISOString(),
    applied: true,
    screening: false,
    interview: false,
    hired: false
  };
  jobs.unshift(newJob);
  saveJobs();
  renderJobs();
  // Clear form
  document.getElementById('new-company').value = '';
  document.getElementById('new-role').value = '';
  document.getElementById('new-url').value = '';
  document.getElementById('new-source').value = '';
  document.getElementById('new-notes').value = '';
});

// Init tracker on load
renderJobs();

// ─── COMPANY RESEARCH ────────────────────────────────────────────────────────
let selectedResearchDepth = 'standard';
document.querySelectorAll('#research-depth-tabs .tab').forEach(tab => {
  tab.addEventListener('click', () => {
    document.querySelectorAll('#research-depth-tabs .tab').forEach(t => t.classList.remove('active'));
    tab.classList.add('active');
    selectedResearchDepth = tab.dataset.depth;
  });
});

document.getElementById('gen-research-btn').addEventListener('click', async () => {
  const companyName = document.getElementById('company-name').value.trim();
  if (!companyName) { showError('research-error', 'Please enter a company name.'); return; }

  const companyUrl = document.getElementById('company-url').value.trim();
  const companyNotes = document.getElementById('company-notes').value.trim();
  const jd = savedJD;

  const depthMap = {
    standard: 'a focused 1-page brief with the most critical intelligence — mission/values, strategic priorities, culture signals, and how Cara maps to their needs',
    deep: 'a comprehensive deep-dive — mission/values, leadership philosophy, business model, recent news/initiatives, known challenges, competitive positioning, culture signals, employee sentiment, and a detailed Cara-fit analysis',
    interview: 'a pre-interview brief optimized for walking into a conversation with confidence — key talking points, smart questions to ask them, culture red flags to watch for, and what they are likely evaluating for in this stage'
  };

  showLoading('research-loading');
  hideError('research-error');
  document.getElementById('research-result').classList.remove('visible');

  const systemPrompt = `You are an expert corporate intelligence analyst and career strategist. You synthesize company research into actionable briefs that help senior professionals walk into interviews and conversations with deep preparation. You think like a management consultant: structured, insight-driven, and always connecting company context to the candidate's positioning.`;

  const userMsg = `Build ${depthMap[selectedResearchDepth]} for Cara Brown on the following company.

COMPANY: ${companyName}
${companyUrl ? `WEBSITE/URL: ${companyUrl}` : ''}
${companyNotes ? `\nWHAT CARA ALREADY KNOWS:\n${companyNotes}` : ''}
${jd ? `\nJOB DESCRIPTION SHE'S APPLYING FOR:\n${jd}` : ''}

CARA'S BACKGROUND FOR FIT ANALYSIS:
${CARA_BIO}

Please structure the brief with these sections (use clear headers):

1. **COMPANY SNAPSHOT** — What they do, size, sector, business model in 3-4 sentences

2. **MISSION, VALUES & CULTURE SIGNALS** — Stated values, how they actually show up (culture), what kind of person thrives there. Note any signals about DEI, innovation, hierarchy, or pace. Reference any public statements, leadership interviews, or Glassdoor patterns if known.

3. **STRATEGIC PRIORITIES & CURRENT INITIATIVES** — What are they focused on right now? What problems are they trying to solve? Any recent news, acquisitions, contracts, pivots, or investments worth knowing?

4. **WHAT THEY'RE REALLY LOOKING FOR** — Based on the JD and company context, what does this role actually need to solve? What's the underlying organizational problem?

5. **HOW CARA MAPS TO THEIR WORLD** — Specific, direct connections between Cara's background and this company's needs. Which of her stories and metrics will land hardest here?

6. **SMART QUESTIONS TO ASK THEM** — 4-5 questions that signal deep preparation and strategic thinking (not "what does success look like" — better than that)

7. **WATCH-OUTS** — Any culture, structure, or role red flags worth noting before committing

Be specific and insightful. Avoid generic statements. This should feel like a brief a consultant prepared, not a Wikipedia summary.`;

  try {
    const output = document.getElementById('research-output');
    output.textContent = '';
    document.getElementById('research-result').classList.add('visible');
    await callClaude(systemPrompt, userMsg, text => { output.textContent = text; });
  } catch (err) {
    showError('research-error', 'Something went wrong: ' + err.message);
    document.getElementById('research-result').classList.remove('visible');
  } finally {
    hideLoading('research-loading');
  }
});

// ─── INTERVIEW PREP ───────────────────────────────────────────────────────────
let selectedInterviewStage = 'phone';
let selectedInterviewResume = 'principal_ds';

document.querySelectorAll('#interview-stage-tabs .tab').forEach(tab => {
  tab.addEventListener('click', () => {
    document.querySelectorAll('#interview-stage-tabs .tab').forEach(t => t.classList.remove('active'));
    tab.classList.add('active');
    selectedInterviewStage = tab.dataset.stage;
  });
});

document.querySelectorAll('#interview-resume-pills .pill').forEach(pill => {
  pill.addEventListener('click', () => {
    document.querySelectorAll('#interview-resume-pills .pill').forEach(p => p.classList.remove('selected'));
    pill.classList.add('selected');
    selectedInterviewResume = pill.dataset.resume;
  });
});

document.getElementById('gen-interview-btn').addEventListener('click', async () => {
  const jd = savedJD || document.getElementById('jd-text').value.trim();
  if (!jd) { showError('interview-error', 'Please save a job description in Step 01 first.'); return; }

  const focus = document.getElementById('interview-focus').value.trim();
  const resume = RESUMES[selectedInterviewResume];

  const stageMap = {
    phone: 'a recruiter or HR phone screen (typically 20-30 min, covers background, fit, compensation expectations, and basic behavioral questions)',
    hiring: 'a hiring manager interview (typically 45-60 min, goes deep on how you work, your approach, specific projects, leadership style)',
    panel: 'a panel or final-round interview (multiple interviewers, may include case studies, presentations, cross-functional stakeholders, or a design exercise)'
  };

  showLoading('interview-loading');
  hideError('interview-error');
  document.getElementById('interview-result').classList.remove('visible');

  const systemPrompt = `You are a world-class interview coach specializing in senior design strategy and service design roles. You prepare candidates with specific, story-based answers — never generic advice. Every answer you craft is grounded in the candidate's real experience and directly responsive to what the interviewer is actually evaluating.`;

  const userMsg = `Build a complete interview prep guide for Cara Brown for the following role and stage.

INTERVIEW STAGE: ${stageMap[selectedInterviewStage]}

JOB DESCRIPTION:
${jd}
${savedRoleName ? `Role: ${savedRoleName}` : ''}

CARA'S RESUME (source of truth for stories):
${resume.text}

${focus ? `\nCARA'S SPECIFIC FOCUS / CONCERNS:\n${focus}` : ''}

Please generate the following:

**PART 1 — YOUR 60-SECOND OPENER**
Write Cara's "Tell me about yourself" answer for this specific role. Should be 4-5 sentences, end pointing toward why she's here.

**PART 2 — THE 10 MOST LIKELY QUESTIONS + PREPARED ANSWERS**
For each question:
- Write the question exactly as an interviewer would ask it
- Provide a complete STAR-method answer (Situation, Task, Action, Result) drawn from Cara's actual experience
- Bold the result/metric so it's easy to find when scanning
- Note which story this draws from (e.g., "Kroger NPS story" or "RealReal backlog story")

Select questions that are genuinely likely for this stage and role — behavioral, situational, and role-specific. Include at least one question about:
- Leading without authority / influencing up
- Ambiguity or a time they had to define the problem themselves
- Measuring impact / using data
- Working cross-functionally with engineering/product/ops
- Career narrative (why leaving, why this role)
${selectedInterviewStage !== 'phone' ? '- A challenge or failure and what you learned' : ''}
${selectedInterviewStage === 'panel' ? '- A specific design/strategy methodology deep dive' : ''}

**PART 3 — LANDMINES TO WATCH FOR**
2-3 tricky questions or moments that could trip Cara up in this interview, and how to handle them with confidence.

Be specific, grounded, and story-based throughout. Do not give generic advice.`;

  try {
    const output = document.getElementById('interview-output');
    output.textContent = '';
    document.getElementById('interview-result').classList.add('visible');
    await callClaude(systemPrompt, userMsg, text => { output.textContent = text; });
  } catch (err) {
    showError('interview-error', 'Something went wrong: ' + err.message);
    document.getElementById('interview-result').classList.remove('visible');
  } finally {
    hideLoading('interview-loading');
  }
});

// ─── LINKEDIN OUTREACH ────────────────────────────────────────────────────────
let selectedLIType = 'connect';

document.querySelectorAll('#li-type-tabs .tab').forEach(tab => {
  tab.addEventListener('click', () => {
    document.querySelectorAll('#li-type-tabs .tab').forEach(t => t.classList.remove('active'));
    tab.classList.add('active');
    selectedLIType = tab.dataset.litype;
  });
});

document.getElementById('gen-li-btn').addEventListener('click', async () => {
  const liName = document.getElementById('li-name').value.trim();
  const liTitle = document.getElementById('li-title').value.trim();
  if (!liName || !liTitle) { showError('li-error', 'Please enter the person\'s name and title.'); return; }

  const liContext = document.getElementById('li-context').value.trim();
  const liGoal = document.getElementById('li-goal').value.trim();
  const jd = savedJD;

  const typeMap = {
    connect: 'a LinkedIn connection request (300 character limit — must be tight, specific, and earn the accept)',
    info: 'an informational interview request (sent via LinkedIn message or InMail, ~150 words max, goal is a 20-minute call)',
    referral: 'a referral request (respectful, specific, makes it easy for them to say yes or pass along)',
    followup: 'a follow-up message after applying online (shows initiative, differentiates from the pile, not desperate)'
  };

  showLoading('li-loading');
  hideError('li-error');
  document.getElementById('li-result').classList.remove('visible');

  const systemPrompt = `You are an expert at writing LinkedIn outreach that actually gets replies. You write messages that feel human, specific, and worth responding to — never templates, never generic flattery. You understand that senior professionals receive dozens of messages and only reply to the ones that signal real thought and mutual value.`;

  const userMsg = `Write ${typeMap[selectedLIType]} for Cara Brown to send to the following person.

RECIPIENT: ${liName}, ${liTitle}
${liContext ? `\nWHAT CARA KNOWS ABOUT THEM:\n${liContext}` : ''}
${liGoal ? `\nCARA'S GOAL:\n${liGoal}` : ''}
${jd ? `\nROLE CONTEXT:\n${savedRoleName || 'See JD'}\n${jd.substring(0, 500)}` : ''}

CARA'S BACKGROUND:
${CARA_BIO}

REQUIREMENTS:
- Write in Cara's voice — confident, warm, human, not stiff
- Be specific to THIS person — reference something real about them if context was provided
- State the ask clearly and make it easy to respond to
- Do NOT use these phrases: "I came across your profile," "I hope this message finds you well," "I'd love to pick your brain," "I'm a huge fan"
- For connection requests: stay under 300 characters, make every word count
- For other types: keep it under 150 words unless a referral request which can be slightly longer
- End with a clear, low-friction ask

Write the message directly, ready to copy and send. Then add 1-2 sentence note on why this approach works.`;

  try {
    const output = document.getElementById('li-output');
    output.textContent = '';
    document.getElementById('li-result').classList.add('visible');
    await callClaude(systemPrompt, userMsg, text => { output.textContent = text; });
  } catch (err) {
    showError('li-error', 'Something went wrong: ' + err.message);
    document.getElementById('li-result').classList.remove('visible');
  } finally {
    hideLoading('li-loading');
  }
});

// ─── SALARY & RECRUITER INTEL ─────────────────────────────────────────────────
let salaryMode = 'salary';

document.querySelectorAll('#salary-mode-tabs .tab').forEach(tab => {
  tab.addEventListener('click', () => {
    document.querySelectorAll('#salary-mode-tabs .tab').forEach(t => t.classList.remove('active'));
    tab.classList.add('active');
    salaryMode = tab.dataset.salmode;
    document.getElementById('salary-sub').style.display = salaryMode === 'salary' ? 'block' : 'none';
    document.getElementById('recruiter-sub').style.display = salaryMode === 'recruiter' ? 'block' : 'none';
  });
});

document.getElementById('gen-salary-btn').addEventListener('click', async () => {
  const role = document.getElementById('sal-role').value.trim();
  if (!role) { showError('salary-error', 'Please enter the role title.'); return; }

  const location = document.getElementById('sal-location').value.trim();
  const companyType = document.getElementById('sal-company-type').value.trim();
  const offered = document.getElementById('sal-offered').value.trim();
  const situation = document.getElementById('sal-situation').value.trim();
  const jd = savedJD;

  showLoading('salary-loading');
  hideError('salary-error');
  document.getElementById('salary-result').classList.remove('visible');

  const systemPrompt = `You are an expert salary negotiation coach and compensation analyst with deep knowledge of design, strategy, UX, and consulting markets. You give candidates the specific intelligence and language they need to negotiate from a position of strength, not desperation.`;

  const userMsg = `Build a salary research brief and negotiation strategy for Cara Brown.

ROLE: ${role}
${location ? `LOCATION: ${location}` : ''}
${companyType ? `COMPANY TYPE: ${companyType}` : ''}
${offered ? `WHAT'S BEEN OFFERED OR MENTIONED: ${offered}` : ''}
${situation ? `\nCARA'S SITUATION:\n${situation}` : ''}
${jd ? `\nJOB DESCRIPTION:\n${jd.substring(0, 800)}` : ''}

CARA'S PROFILE:
${CARA_BIO}
15+ years experience, MBA, Principal-level, enterprise impact including $270M risk quantification, multiple C-suite partnerships.

Please provide:

**1. MARKET RATE RESEARCH**
Based on your knowledge of compensation data (Levels.fyi, LinkedIn Salary, Glassdoor, Payscale, industry surveys), provide realistic salary ranges for this role by:
- Level (Senior, Principal, Director, VP equivalent)
- Sector (consulting/agency vs in-house vs federal contractor vs tech)
- Location (if provided)
- Total compensation breakdown (base, bonus, equity if applicable)

**2. CARA'S ANCHOR NUMBER**
Given her experience, impact, and credentials, what should her target number be? What's her walk-away floor? What's her stretch ask? Be direct.

**3. NEGOTIATION SCRIPT**
Write exact language Cara can use to:
- Respond when asked "what are your salary expectations?" (before an offer)
- Counter a lowball offer confidently
- Ask for time to consider without losing momentum
- Negotiate total comp beyond base (bonus, remote flexibility, title, PTO, start date)

**4. COMMON TRAPS & HOW TO AVOID THEM**
3-4 specific mistakes senior candidates make in this type of negotiation and how Cara should handle them.

${offered && offered.toLowerCase().includes('recruiter') ? `**5. RECRUITER CONTEXT**
Notes on how recruiter-sourced roles affect negotiation leverage and what to watch for when a recruiter quotes a range.` : ''}

Be specific, direct, and practical. Give Cara real numbers and real language, not platitudes.`;

  try {
    const output = document.getElementById('salary-output');
    output.textContent = '';
    document.getElementById('salary-result').classList.add('visible');
    await callClaude(systemPrompt, userMsg, text => { output.textContent = text; });
  } catch (err) {
    showError('salary-error', 'Something went wrong: ' + err.message);
    document.getElementById('salary-result').classList.remove('visible');
  } finally {
    hideLoading('salary-loading');
  }
});

document.getElementById('gen-recruiter-btn').addEventListener('click', async () => {
  const recRole = document.getElementById('rec-role').value.trim();
  const recInfo = document.getElementById('rec-info').value.trim();
  if (!recRole || !recInfo) { showError('recruiter-error', 'Please enter the role and recruiter details.'); return; }

  const recJD = document.getElementById('rec-jd').value.trim();

  showLoading('recruiter-loading');
  hideError('recruiter-error');
  document.getElementById('recruiter-result').classList.remove('visible');

  const systemPrompt = `You are an expert in recruiting industry practices, staffing agency dynamics, and candidate protection strategies. You help senior professionals navigate complex recruiter situations — identifying primary vs. secondary agencies, spotting fake or fraudulent recruiters, avoiding duplicate submissions, and protecting their candidacy. You are direct, specific, and give actionable guidance.`;

  const userMsg = `Help Cara Brown analyze and vet the following recruiter situation.

ROLE IN QUESTION: ${recRole}

RECRUITER DETAILS:
${recInfo}

${recJD ? `\nJOB DESCRIPTION / DETAILS SHARED:\n${recJD}` : ''}

Please provide a thorough analysis:

**1. SITUATION ASSESSMENT**
What is likely happening here? Is this the same role posted through multiple agencies? Is one of these a "body shop" using another firm's listing? What are the red flags and green flags for each recruiter?

**2. RECRUITER LEGITIMACY CHECK**
For each recruiter mentioned, assess:
- Signals of legitimacy (direct employer relationship vs. secondary/tertiary agency)
- Red flags (vague company name, no req number, pressure tactics, salary inconsistency, generic job description)
- Likely agency tier (Tier 1: direct employer relationship / preferred vendor | Tier 2: secondary agency | Tier 3: resume farmer / body shop)

**3. THE DUPLICATE SUBMISSION RISK**
Explain clearly: what happens if multiple agencies submit Cara for the same role? What are her risks? What does "owns the candidate" mean in practice and how can she protect herself?

**4. WHO TO RESPOND TO (AND HOW)**
Specific recommendation on which recruiter(s) to engage with and in what order. What to say to the others to protect herself without burning bridges.

**5. QUESTIONS TO ASK EACH RECRUITER BEFORE GIVING CONSENT**
Exact questions Cara should ask to verify the recruiter is legitimate and has a direct relationship with the employer before authorizing them to submit her resume. Include: how to ask for the employer name, job req number, and submission consent confirmation.

**6. PROTECTING YOURSELF GOING FORWARD**
Best practices for Cara to use any time multiple recruiters reach out — standard protocol to never get caught in this situation again.

Be direct and specific. Name the signals clearly. This is high-stakes.`;

  try {
    const output = document.getElementById('recruiter-output');
    output.textContent = '';
    document.getElementById('recruiter-result').classList.add('visible');
    await callClaude(systemPrompt, userMsg, text => { output.textContent = text; });
  } catch (err) {
    showError('recruiter-error', 'Something went wrong: ' + err.message);
    document.getElementById('recruiter-result').classList.remove('visible');
  } finally {
    hideLoading('recruiter-loading');
  }
});


function showLoading(id) { document.getElementById(id).classList.add('visible'); }
function hideLoading(id) { document.getElementById(id).classList.remove('visible'); }
function showError(id, msg) {
  const el = document.getElementById(id);
  el.textContent = msg;
  el.classList.add('visible');
}
function hideError(id) { document.getElementById(id).classList.remove('visible'); }

function copyResult(id) {
  const text = document.getElementById(id).textContent;
  navigator.clipboard.writeText(text).then(() => {
    const btn = event.target;
    btn.textContent = 'Copied!';
    setTimeout(() => btn.textContent = 'Copy', 2000);
  });
}
</script>
</body>
</html>
